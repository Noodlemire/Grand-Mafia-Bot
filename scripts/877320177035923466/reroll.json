{"userexec":false,"lines":["!var me {1}","!if {!is {me} prev_gold} = False or {!is {me} prev_loot_type} = False or {!is {me} prev_loot_qty} = False or {!is {me} prev_monster} = False","!throw There is nothing to reroll.","!end","!if {!tag {me} inv_id2} < {!tag {me} prev_gold}","!throw You have already spent the gold collected from the previous monster.","!end","!if {!is {me} inv_{!tag {me} prev_loot_type}} = False or {!tag {me} inv_{!tag {me} prev_loot_type}} < {!tag {me} prev_loot_qty}","!throw You have already used up the item(s) obtained from the previous monster.","!end","!if {!tag {me} prev_monster} = ID31","!throw You cannot reroll that loot because it is always the same.","!end","!var prevmeta !data monster {!tag {me} prev_monster} meta","!tag {me} inv_id2 {!sub {!tag {me} inv_id2} {!tag {me} prev_gold}}","!tag {me} inv_{!tag {me} prev_loot_type} {!sub {!tag {me} inv_{!tag {me} prev_loot_type}} {!tag {me} prev_loot_qty}}","!var new_gold {!r {{prevmeta} min_gold} {{prevmeta} max_gold}}","!if {{prevmeta} loot_opts} > 1","!while {!exists loot_sel} = False or {{prevmeta} loot_type_{loot_sel}} = {!tag {me} prev_loot_type}","!var loot_sel {!r {{prevmeta} loot_opts}}","!end","!else","!var loot_sel 1","!end","!var new_loot_type {{prevmeta} loot_type_{loot_sel}}","!var new_loot_qty {!r {{prevmeta} loot_min_{loot_sel}} {{prevmeta} loot_max_{loot_sel}}}","!tag {me} inv_id2 {!add {!tag {me} inv_id2} {new_gold}}","!if {!is {me} inv_{new_loot_type}} = True","!tag {me} inv_{new_loot_type} {!add {!tag {me} inv_{new_loot_type}} {new_loot_qty}}","!else","!tag {me} inv_{new_loot_type} {new_loot_qty}","!end","!say You have transformed {!tag {me} prev_gold}x ü™ô Gold and {!tag {me} prev_loot_qty}x {!data item {!tag {me} prev_loot_type} params emoji} {!data item {!tag {me} prev_loot_type} title} into **{new_gold}x ü™ô Gold** and **{new_loot_qty}x {!data item {new_loot_type} params emoji} {!data item {new_loot_type} title}**!","!var slot {!data item {!tag {me} prev_loot_type} params equip_type}","!if {!tag {me} inv_{!tag {me} prev_loot_type}} = 0 and {!tag {me} equip_{slot}} = {!data item {!tag {me} prev_loot_type} params emoji}","!if {slot} = Weapon","!tag {me} equip_weapon ‚ùå","!tag {me} min_attack {!add {!tag {me} min_attack} 2}","!tag {me} max_attack {!add {!tag {me} max_attack} 4}","!else","!tag {me} equip_{slot} -","!end","!foreach _ v min_attack\nmax_attack\ndefense","!if {!has item {!tag {me} prev_loot_type} {v}} = True","!tag {me} {v} {!sub {!tag {me} {v}} {!data item {!tag {me} prev_loot_type} meta {v}}}","!end","!end","!end","!tag {me} prev_gold -","!tag {me} prev_loot_type -","!tag {me} prev_loot_qty -","!tag {me} prev_monster -"]}