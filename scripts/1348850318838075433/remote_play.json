{"userexec":false,"lines":["!var me {!player {1}}","!if {#} <= 1","!throw Usage: !e play <card> [on target 1, target 2, target N...]","!else {!tag {me} hand#} <= 0","!throw You have no cards to play.","!else {!exists action_log} = False","!throw An Action Log channel must be set up first!","!end","!var cdata {2}","!var tcount 0","!var real_card true","!var wallable true","!for i 3 {#}","!if {!lower {{i}}} = --fake","!var real_card false","!else {!lower {{i}}} = --bypass","!var wallable false","!else {!lower {{i}}} = --fixed_damage","!var i {!add {i} 1}","!var dmg {{i}}","!else {on} = found","!if {!exists tdata} = True","!var tdata {tdata} {{i}}","!else","!var tdata {{i}}","!end","!else {{i}} = on","!var on found","!else","!var cdata {cdata} {{i}}","!end","!end","!if {!is {me} must_discard} = True and {wallable} = true","!throw You must discard/fuse {!tag {me} must_discard} cards first!","!end","!var card {!e to_id {cdata}}","!var category {!e card_category {card}}","!var rarity {!e card_rarity {card}}","!if {!ioo {rarity} Common Special} = True and {wallable} = true","!foreach _ se ID16\nID17\nID18","!if {!is {me} se_{se}} = True and {!data status_effect {se} meta category} = {category} and {!e card_has_id {card} ID37} = False","!throw You cannot play Common/Special {category} cards while Incapacitated!","!end","!end","!end","!if {category} = Item","!var tgoal 0","!var targettypes {!e card_item_target_type {card}}","!foreach ii type {!split | {targettypes}}","!if {type} != yourself","!var tgoal {!add {tgoal} 1}","!var tgoal{tgoal} {type}","!end","!end","!if {tgoal} = 0 and {!exists tdata} = True","!throw Usage: !e play {cdata}","!end","!end","!if {!exists tdata} = True","!if {card} = ID36","!throw Usage: !e play {cdata}","!end","!foreach i _t {!split , {tdata}}","!var t {_t}","!if {!isint {t}} = True","!var t {pl{t}}","!end","!var tcount {i}","!if {category} = Attack","!var t{i} {!player {t}}","!if {t{i}} = {me} and {wallable} = true","!throw You cannot attack yourself!","!else {!is {me} se_id7} = True and {wallable} = true","!throw You cannot play any attacking cards until you are no longer Halted ({!tag {me} se_id7})!","!else {!tag {t{i}} hp} <= 0","!throw Player '{_t}' is already dead!","!end","!if {wallable} = true","!var _wallable true","!if {!e card_has_id {card} ID40} = True","!var _wallable false","!end","!var range_limit {!e card_range {card}}","!var dist {!e check_range up {!tag {me} pos} {!tag {t{i}} pos} {_wallable}}","!var dist_alt {!e check_range down {!tag {me} pos} {!tag {t{i}} pos} {_wallable}}","!if {dist} = blocked","!var dist {dist_alt}","!end","!if {dist} = blocked","!throw You cannot target players behind walls!","!end","!if {range_limit} != ∞","!if {dist_alt} < {dist}","!var dist {dist_alt}","!end","!if {dist} > {range_limit}","!throw Player '{_t}' is out of range! ({dist} > {range_limit})","!end","!end","!end","!else {category} = Defense","!var t{i} {!lower {t}}","!if {!e card_is_shield {card}} = False","!if {!is {me} se_id4} = True and {wallable} = true","!throw You cannot defend against attacks until you are no longer Tasered ({!tag {me} se_id4})!","!else {silent_{t{i}}} = True and {target_{t{i}}} != {me} or {round_{t{i}}} != {round}","!throw Cannot find action '{t{i}}' from this round.","!else {!e card_category {card_{t{i}}}} != Attack","!throw That is not an attack, so you cannot defend against it.","!else {target_{t{i}}} != {me} and {!e card_has_id {card} ID45} = False","!throw You cannot block an attack against another player.","!else {!e card_has_id {card} ID45} = True","!if {target_{t{i}}} = {me}","!throw This card can only be used to block attacks directed at other players.","!else {!is {target_{t{i}}} wall} = True","!throw Attacks against walls apply their damage immediately, so you cannot Guard! them.","!end","!else {!exists def_{t{i}}} = True","!throw You have already defended against the '{t{i}}' attack.","!else {!e card_has_meta {card_{t{i}}} skip_attack_logic} = True","!throw That attack is unblockable.","!end","!else {!e card_has_id {card} ID45} = True and {i} = 1","!var t{i} {!player {t}}","!if {t{i}} = {me}","!throw You must choose a player other than yourself.","!else {!tag {t{i}} hp} <= 0","!throw Player '{_t}' is already dead!","!end","!else {!ioo {t{i}} up down} = False","!throw You must select either 'up' or 'down' (without quotes)!","!end","!else","!if {tgoal{i}} = player","!var t{i} {!player {t}}","!if {t{i}} = {me}","!throw You cannot do that to yourself!","!else {!tag {t{i}} hp} <= 0","!throw Player '{_t}' is already dead!","!else {!is {t{i}} wall} = True","!throw Item cards cannot be used on walls.","!end","!else {!ioo {tgoal{i}} card attack defense item} = True","!var t{i} {!e to_id {t}}","!if {!isint {!at 3 {t{i}}}} = False","!throw You must select an un-fused card.","!end","!if {!ioo {!e card_rarity {t{i}}} Common Special} = False","!throw You can only choose Common or Special cards.","!end","!var tcat {!e card_category {t{i}}}","!if {tgoal{i}} != card and {tgoal{i}} != {!lower {tcat}}","!throw Card '{!e to_str {t{i}}}' has the wrong type! (Need {!title {tgoal{i}}}, got {tcat})","!end","!var cardcount 0","!for n 1 {!tag {me} hand#}","!if {!tag {me} hand{n}} = {t{i}} and {already{n}} != y","!var cardcount {!add {cardcount} 1}","!var last {n}","!end","!end","!if {t{i}} = {card} and {cardcount} < 2 or {cardcount} < 1","!throw Your hand does not have {!e to_str {t{i}}}","!end","!var t{i} {last}","!else {tgoal{i}} = crate","!var t{i} {!e to_id {t}}","!if {!ioo {t{i}} ID0 ID6 ID17} = False","!throw You must choose one of: Pistol!, Defend!, Bandage!","!end","!else {tgoal{i}} = category","!var t{i} {!lower {t}}","!if {!ioo {t{i}} attack defense item} = False","!throw You must select one of: attack, defense, or item","!end","!end","!end","!if {already{t{i}}} = y","!throw Duplicate target!","!else","!var already{t{i}} y","!end","!end","!end","!if {!exists tgoal} = False","!var tgoal {!e targets {card}}","!end","!if {real_card} = true","!if {!isint {!at 3 {card}}} = False and {!at 6 {card}} = NULL","!var di {!at 3 {card}}{!at 4 {card}}{!at 1 {card}}{!at 2 {card}}","!end","!for i 1 {!tag {me} hand#}","!if {!tag {me} hand{i}} = {card} or {!tag {me} hand{i}} = {di}","!var found true","!var i {!tag {me} hand#}","!end","!end","!if {found} != true","!throw Your hand does not have {!e to_str {card}}","!end","!end","!if {!e card_has_id {card} ID45} = True and {!e card_is_shield {card}} = True","!if {tcount} != 2","!throw Usage: !e play {cdata} on <player>, <up or down>","!end","!var special_guard_wall_user_var {t1}","!var t1 {t2}","!var tcount 1","!else {tgoal} = all","!var tgoal 0","!foreach i plr {!arg {!players}}","!if {!tag {plr} hp} > 0","!var tgoal {!add {tgoal} 1}","!var t{tgoal} {i}","!end","!end","!var tcount {tgoal}","!else {tcount} != {tgoal}","!var err Usage: !e play {cdata}","!if {tgoal} = 1","!var err {err} on <target>","!else","!var err {err} on","!for i 1 {tgoal}","!var err {err} <target {i}>","!if {i} < {tgoal}","!var err {err},","!end","!end","!end","!throw {err}","!end","!if {tgoal} = 0","!var tcount 1","!var t1 {me}","!end","!var ammo {!e ammo {card}}","!if {!tag {me} ammo} < {ammo}","!throw You must have at least {ammo} Ammo to use this card.","!end","!if {!exists round} = False","!g round 1","!end","!var rid round_{round}_","!if {!exists {rid}#} = False","!g {rid}# 0","!end","!if {!ioo {rarity} Common Special} = True","!foreach _ se ID13\nID14\nID15","!if {!is {me} se_{se}} = True and {!data status_effect {se} meta category} = {category}","!tag {me} se_{se} {!sub {!tag {me} se_{se}} 1}","!if {!tag {me} se_{se}} <= 0","!tag {me} se_{se} -","!end","!send {action_log} ⚠️ | A card was nullified by a **Negate!**","!var negated t","!end","!end","!end","!if {!exists negated} = False","!var repetitions {!e card_get_meta_num {card} repetitions}","!if {repetitions} = 0","!var repetitions 1","!end","!var im {!e card_get_meta_num {card} im_amt}","!if {im} > 0 and {!e card_is_shield {card}} = False","!var im_fail true","!var im_msg You improvise:","!for i 1 {im}","!if {!r 8} = 8","!var rari Special","!else","!var rari Common","!end","!var draw {!rid card * {rari}}","!if {!e card_category {draw}} = Defense and {!e card_is_shield {draw}} = False or {!is {me} wall} = False","!var im_msg {im_msg}\n{!e get_card {me} {draw}}","!end","!if {!e card_category {draw}} = Defense","!var im_fail false","!end","!end","!if {im_fail} = true","!var tcount 0","!var aid {!e action_id}","!var next {!add {{rid}#} 1}","!g {rid}# {next}","!g {rid}{next} {aid}","!g round_{aid} {round}","!g action_{aid} {next}","!g user_{aid} {me}","!g card_{aid} {card}","!g silent_{aid} True","!g target_{aid} Fail","!say {im_msg}\nYou failed to defend! [{aid}]","!else","!say {im_msg}\nSuccess!","!end","!end","!if {category} = Item","!var silent {!e card_both_meta {card} silent}","!var aid {!e action_id}","!var next {!add {{rid}#} 1}","!g {rid}# {next}","!g {rid}{next} {aid}","!g round_{aid} {round}","!g action_{aid} {next}","!g user_{aid} {me}","!g card_{aid} {card}","!g silent_{aid} {silent}","!var args {tgoal1} {t1}","!if {!exists tgoal2} = True","!var args {args} {tgoal2} {t2}","!end","!if {!exists tgoal3} = True","!var args {args} {tgoal3} {t3}","!end","!g target_{aid} {args}","!if {silent} = False","!send {action_log} {!data category item meta emoji} | Somebody has played an item card. [{aid}]","!end","!var card_item_main {!e card_function {card} on_item_main}","!if {card_item_main} != ,","!foreach i cim {!split , {card_item_main}}","!var response {!e {cim} {me} {i} {card} {args}}","!if {response} != Nothing","!say {response}","!end","!end","!end","!if {silent} = True","!say [{aid}]","!end","!else","!var silent {!e card_has_meta {card} silent}","!for i 1 {tcount}","!for r 1 {repetitions}","!var aid {!e action_id}","!var next {!add {{rid}#} 1}","!g {rid}# {next}","!g {rid}{next} {aid}","!g round_{aid} {round}","!g action_{aid} {next}","!g user_{aid} {me}","!g card_{aid} {card}","!g target_{aid} {t{i}}","!g silent_{aid} {silent}","!if {!exists dmg} = False and {!e card_has_id {card} ID40} = True","!var dmg {!round {!div {!e card_damage {card}} {dist}} up}","!end","!if {!exists dmg} = True","!g fixed_damage_{aid} {dmg}","!end","!if {category} = Attack and {!e card_has_meta {card} skip_attack_logic} = False","!if {!is {t{i}} se_id4} = True","!tag {t{i}} se_id4 {!sub {!tag {t{i}} se_id4} 1}","!if {!tag {t{i}} se_id4} <= 0","!tag {t{i}} se_id4 -","!var tasermsg ⚠️ | {!pn {t{i}}} is no longer Tasered!","!end","!end","!if {!is {t{i}} se_id7} = True","!tag {t{i}} se_id7 {!sub {!tag {t{i}} se_id7} 1}","!if {!tag {t{i}} se_id7} <= 0","!tag {t{i}} se_id7 -","!send {!pc {t{i}}} ⚠️ | You are no longer Halted!","!end","!end","!if {!is {t{i}} wall} = False","!var msg {!data category attack meta emoji} | **<@{!pid {t{i}}}>** has been attacked! They have until the end of the phase to defend. [{aid}]","!if {silent} = True","!send {!pc {t{i}}} {msg}","!else","!send {action_log} {msg}","!end","!if {!exists tasermsg} = True and {!tag {t{i}} hp} > 0","!send {action_log} {tasermsg}","!end","!if {!is {t{i}} ready} = True","!tag {t{i}} ready -","!send {!pc {t{i}}} ```diff\n-Due to being attacked, you are no longer marked as ready.\n```","!end","!else {!tag {t{i}} hp} > 0","!send {action_log} {!data category attack meta emoji} | **{!title {!pid {t{i}}}}** has been attacked! [{aid}]","!if {!exists tasermsg} = True and {!tag {t{i}} hp} > 0","!send {action_log} {tasermsg}","!end","!var defended False","!if {!is {t{i}} hand1} = True and {!is {t{i}} se_id4} = False and {!e card_get_meta_num {card} ta_amt} = 0","!e remote_play {t{i}} {!tag {t{i}} hand1} on {aid}","!var defended True","!end","!if {defended} = {!e card_has_meta {card} inverse}","!if {!exists dmg} = False","!var dmg {!e card_damage {card}}","!end","!if {dmg} >= {!tag {t{i}} hp}","!send {action_log} 💥 | **{!title {!pid {t{i}}}} was destroyed!**","!else","!send {action_log} ⚠️ | **{!title {!pid {t{i}}}}** took {dmg} damage!","!end","!tag {t{i}} hp {!sub {!tag {t{i}} hp} {dmg}}","!end","!end","!if {!is {t{i}} se_id3} = True","!for n 1 {!tag {t{i}} se_id3}","!e remote_play {!tag {t{i}} se_id3_user{n}} {!tag {t{i}} se_id3_card{n}} on {!tag {me} pos} --fake --bypass","!tag {t{i}} se_id3_user{n} -","!tag {t{i}} se_id3_card{n} -","!end","!tag {t{i}} se_id3 -","!end","!else {category} = Defense and {t{i}} != {me}","!if {!e card_is_shield {card}} = False","!if {silent_{t{i}}} = True","!var silent True","!g silent_{aid} True","!end","!g def_{t{i}} = t","!var msg {!data category defense meta emoji} | {!pn {me}} defends against the '{t{i}}' attack. [{aid}]","!if {silent} = False","!send {action_log} {msg}","!else","!say {msg}","!end","!var acard {card_{t{i}}}","!if {!e card_has_meta {acard} inverse} = True","!if {acard} = mamama","!var copy {card}","!else {acard} = mama","!if {!at 6 {card}} != NULL","!var copy {!at 1 {card}}{!at 2 {card}}{!at 3 {card}}{!at 4 {card}}","!else","!var copy {card}","!end","!else","!if {!isint {!at 3 {card}}} = False","!var copy {!e to_id {!at 1 {card}}{!at 2 {card}}}","!else","!var copy {card}","!end","!end","!var auser {user_{t{i}}}","!e get_card {auser} {card}","!send {!pc {auser}} You have Magnetized your target's **{!e to_str {card}}** into your hand!","!end","!else","!var spos {!tag {me} pos}","!if {!exists special_guard_wall_user_var} = True","!var spos {!tag {special_guard_wall_user_var} pos}","!end","!if {t{i}} = down","!var spos {!add {spos} 1}","!end","!var next {!add {pl#} 1}","!while {next} > {spos}","!tag {pl{!sub {next} 1}} pos {next}","!g pl{next} {pl{!sub {next} 1}}","!var next {!sub {next} 1}","!end","!var dir {t{i}}","!if {!e card_has_meta {card} bidirectional} = True","!var dir bi","!end","!addplayer {dir}_wall_[{aid}] <#1348852891343126609> {aid}","!g pl{next} {!player {aid}}","!g pl# {!add {pl#} 1}","!tag {aid} wall T","!tag {aid} hp {!e card_get_meta_num {card} hp}","!tag {aid} max_hp 5","!if {!tag {aid} hp} > {!tag {aid} max_hp}","!tag {aid} max_hp {!tag {aid} hp}","!end","!tag {aid} card {card}","!tag {aid} pos {next}","!tag {aid} hand# 0","!if {!e card_has_meta {card} bidirectional} = True","!tag {aid} allow neither","!else","!tag {aid} allow {t{i}}","!end","!if {!isint {!at 3 {card}}} = False","!var id1 {!e to_id {!at 1 {card}}{!at 2 {card}}}","!var id2 {!e to_id {!at 3 {card}}{!at 4 {card}}}","!foreach k id {!split | {id1}|{id2}}","!if {!e card_is_shield {id}} = False","!tag {aid} hand# 1","!if {id} = ID45","!tag {aid} hand1 ID6","!else","!tag {aid} hand1 {id}","!end","!end","!end","!end","!send {action_log} {!data category defense meta emoji} | {!pn {me}} has created a {!tag {aid} hp}HP {!title {dir}} Wall. [{aid}]","!emsg {cur_playerlist_msg} {!e playerlist}","!end","!end","!var on_target {!e card_function {card} on_target}","!if {on_target} != ,","!var ots {on_target}","!foreach n ot {!split , {ots}}","!var response {!e {ot} {me} {n} {card} {t{i}} {i} {aid}}","!if {response} != Nothing","!say {response}","!end","!end","!end","!end","!end","!var on_play {!e card_function {card} on_play}","!if {on_play} != ,","!var ops {on_play}","!foreach i op {!split , {ops}}","!var response {!e {op} {me} {i} {card}}","!if {response} != Nothing","!say {response}","!end","!end","!end","!if {!ioo {rarity} Common Special} = True","!foreach plr _ {!players}","!foreach __ se ID10\nID11\nID12","!if {!is {plr} se_{se}} = True and {!data status_effect {se} meta category} = {category}","!tag {plr} se_{se} {!sub {!tag {plr} se_{se}} 1}","!if {!tag {plr} se_{se}} <= 0","!tag {plr} se_{se} -","!end","!send {!pc {plr}} You have cloned: {!e to_str {card}}","!e get_card {plr} {card}","!end","!end","!end","!end","!end","!end","!if {real_card} = true","!e lose_card {me} false {card}","!tag {me} ammo {!sub {!tag {me} ammo} {ammo}}","!if {category} = Attack and {!exists event_ID6} = True","!if {!is {me} spectator_total} = False","!tag {me} spectator_total {ammo}","!else","!tag {me} spectator_total {!add {!tag {me} spectator_total} {ammo}}","!end","!end","!if {!is {me} duel} = True","!tag {me} duel {!add {!tag {me} duel} {ammo}}","!end","!end","!emsg {!tag {me} handlink} {!e hand {me}}","!emsg {cur_playerlist_msg} {!e playerlist}","!overwrite"]}