{"userexec":true,"lines":["!var me {!num}","!var usage Usage: !e fuse_submit <card name> and <card name> OR !e fuse_submit <fused card name>","!if {me} = None","!throw You are not a registered player!","!else {!pc {me}} != {!channel}","!throw You may only use this command within your own player channel.","!else {!tag {me} hp} <= 0","!throw You are dead!","!else {#} = 0","!throw {usage}","!else {!tag {me} hand#} <= 1","!throw You don't have enough cards to fuse anything.","!end","!var id1 {1}","!for i 2 {#}","!if {found_and} = t","!if {{i}} = and","!throw You cannot fuse 3 different cards together.","!else {!exists id2} = True","!var id2 {id2} {{i}}","!else","!var id2 {{i}}","!end","!else {{i}} = and","!var found_and t","!else","!var id1 {id1} {{i}}","!end","!end","!var id1 {!e to_id {id1}}","!if {!exists id2} = True","!var id2 {!e to_id {id2}}","!end","!if {!exists id1} = {!exists id2}","!if {!at 4 {id1}} = NULL and {!at 4 {id2}} = NULL","!var fusion {!e to_id {id1} {id2}}","!else","!throw You cannot fuse cards that are already fused!","!end","!else {!isint {!at 3 {id1}}} = False","!var fusion {id1}","!var id1 {!e to_id {!at 1 {fusion}}{!at 2 {fusion}}}","!var id2 {!e to_id {!at 3 {fusion}}{!at 4 {fusion}}}","!else","!throw {usage}","!end","!if {!data card {id1} params category} != {!data card {id2} params category}","!throw You cannot fuse cards of different categories!","!end","!var rarity {!e card_rarity {fusion}}","!if {rarity} != Common and {rarity} != Special","!throw You cannot fuse {rarity} cards!","!end","!for i 1 {!tag {me} hand#}","!if {found1} != true and {!tag {me} hand{i}} = {id1}","!var found1 true","!else {!tag {me} hand{i}} = {id2}","!var found2 true","!end","!if {found1} = {found2}","!var i {!tag {me} hand#}","!end","!end","!if {found1} != {found2}","!var output |","!if {found1} != true","!var output {!data card {id1} title}{output}","!end","!if {found2} != true","!var output {output}{!data card {id2} title}","!end","!throw Your hand is missing {!e commalist {output}}","!end","!e lose_card {me} false {id1}","!e lose_card {me} false {id2}","!e get_card {me} {fusion}","!emsg {!tag {me} handlink} {!e hand {me}}","!if {!is {me} must_discard} = True","!tag {me} must_discard {!sub {!tag {me} must_discard} 1}","!if {!tag {me} must_discard} <= 0","!tag {me} must_discard -","!end","!end","!overwrite"]}